<html xmlns="http://www.w3.org/1999/xhtml" xmlns:c="http://java.sun.com/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:t="http://myfaces.apache.org/tomahawk">

<f:view>
    <f:loadBundle var="text" basename="messages"/>

    <head>
        <title>#{text['userForm.title']}</title>
    </head>

    <h:messages errorClass="alert alert-error fade in" layout="table" style="width: 100%"/>

    <p>Please fill in user's information below:</p>

    <h:form id="userForm" styleClass="form-horizontal well">
        <h:inputHidden value="#{userForm.user.id}">
            <f:convertNumber/>
        </h:inputHidden>

        <div class="control-group">
            <h:outputLabel for="username" value="#{text['user.username']}" styleClass="control-label"/>
            <div class="controls">
                <h:inputText value="#{userForm.user.username}" id="username" required="true"/>
                <h:message for="username" styleClass="help-inline"/>
            </div>
        </div>

        <div class="control-group">
            <h:outputLabel for="password" value="#{text['user.password']}" styleClass="control-label"/>
            <div class="controls">
                <h:inputSecret value="#{userForm.user.password}" id="password" redisplay="true"/>
                <h:message for="password" styleClass="help-inline"/>
            </div>
        </div>

        <div class="control-group">
            <h:outputLabel for="firstName" value="#{text['user.firstName']}" styleClass="control-label"/>
            <div class="controls">
                <h:inputText value="#{userForm.user.firstName}" id="firstName"/>
                <h:message for="firstName" styleClass="help-inline"/>
            </div>
        </div>

        <div class="control-group">
            <h:outputLabel for="lastName" value="#{text['user.lastName']}" styleClass="control-label"/>
            <div class="controls">
                <h:inputText value="#{userForm.user.lastName}" id="lastName" required="true"/>
                <h:message for="lastName" styleClass="help-inline"/>
            </div>
        </div>

        <div class="control-group">
            <h:outputLabel for="email" value="#{text['user.email']}" styleClass="control-label"/>
            <div class="controls">
                <h:inputText value="#{userForm.user.email}" id="email" required="true"/>
                <h:message for="email" styleClass="help-inline"/>
            </div>
        </div>

        <div class="form-actions">
            <h:commandButton value="Save" action="#{userForm.save}" id="save" styleClass="btn btn-primary"/>
            <c:if test="${not empty userForm.id}">
                <h:commandButton value="Delete" action="#{userForm.delete}" id="delete" styleClass="btn"/>
            </c:if>
            <h:commandButton value="Cancel" action="cancel" immediate="true" id="cancel" styleClass="btn"/>
        </div>

    </h:form>

    <script type="text/javascript">
        $(document).ready(function() {
            $("input[type='text']:visible:enabled:first", document.forms['userForm']).focus();
        });
    </script>

</f:view>
</html>